<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="absensi_ekskul_vie_list" model="ir.ui.view">
        <field name="name">absensi.ekskul.list</field>
        <field name="model">cdn.absensi_ekskul</field>
        <field name="arch" type="xml">
            <list string="Absensi Ekskul">
                <field name="name"/>
                <field name="ekskul_id"/>
                <field name="guru"/>
                <field name="fiscalyear_id"/>
                <field name="states"/>
            </list>
        </field>
    </record>

    <record id="absensi_ekskul_view_form" model="ir.ui.view">
        <field name="name">cdn.absensi_ekskul.view.form</field>
        <field name="model">cdn.absensi_ekskul</field>
        <field name="arch" type="xml">
            <form string="Absensi Ekskul">
                <header>
                    <button name="action_proses" string="Proses" type="object"
                        invisible="states != 'Done'" class="btn-secondary" />
                    <button name="action_done" string="Selesai" type="object"
                        invisible="states != 'Proses'" class="btn-primary" />
                    <field name="states" widget="statusbar" />
                </header>
                <sheet>
                    <group string="Pelaksanaan">
                        <group>
                            <field name="name" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}"/>
                        </group>
                        <group>
                            <field name="fiscalyear_id" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}"/>
                        </group>
                    </group>

                    <group string="Absensi">
                        <group>
                            <field name="ekskul_id" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}"/>
                        </group>
                        <group> 
                            <field name="guru" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}" />
                        </group> 
                    </group> 

                    <notebook> 
                        <page string="Absensi Ekskul">
                            <field name="absen_ids" nolabel="1" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}">
                                <list editable="bottom" create="false">
                                    <field name="siswa_id" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}" string="Santri"/>
                                    <field name="panggilan"/>
                                    <field name="nis"/>
                                    <field name="kehadiran" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}"/>
                                    <field name="keterangan"/>
                                    <field name="keterangan_izin" options="{'no_create_edit':True, 'no_create':True, 'no_open': True}"/>    
                                    <button name="action_view_permission"
                                            string="Detail"
                                            type="object"
                                            icon="fa-eye"
                                            invisible="kehadiran != 'keluar'"
                                            class="btn-primary"/>
                                </list>
                            </field>
                        </page>
                    </notebook>

                    <!-- <div class="oe_chatter" groups="pesantren_guru.group_guru_user">
                        <field name="message_follower_ids" widget="mail_followers" />
                        <field name="activity_ids" widget="mail_activity" />
                        <field name="message_ids" widget="mail_thread" options="{'display_log_button': True}"/>
                    </div> -->
                </sheet>
            </form>
        </field>
    </record>

    <record id="absensi_ekskul_action" model="ir.actions.act_window">
        <field name="name"> Absensi Ekskul </field>
        <field name="type">ir.actions.act_window</field> 
        <field name="res_model">cdn.absensi_ekskul</field>
        <field name="view_mode">list,form</field>
        <!-- <field name="domain">
            [
            ('guru.user_id','=',uid)
            ]
        </field> -->
    </record>

    <menuitem id="absensi_ekskul_menu" name="Absensi Ekskul" parent="absensi_pengajar" action="absensi_ekskul_action" sequence="20"/>
</odoo>